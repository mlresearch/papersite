---
author: "Neil D. Lawrence"
created: "2026-01-19"
id: "0004"
last_updated: "2026-01-19"
status: "Proposed"
compressed: false
related_requirements: []
related_cips: ["0001", "0002", "0003"]
tags:
- cip
- ci-cd
- automation
- github-actions
title: "Continuous Integration and Deployment for PMLR Proceedings"
---

# CIP-0004: Continuous Integration and Deployment for PMLR Proceedings

> **Note**: This CIP proposes automating the proceedings publication workflow using CI/CD.

## Status

- [x] Proposed - Initial idea documented
- [ ] Accepted - Approved, ready to start work
- [ ] In Progress - Actively being implemented
- [ ] Implemented - Work complete, awaiting verification
- [ ] Closed - Verified and complete
- [ ] Rejected - Will not be implemented
- [ ] Deferred - Postponed

## Summary

Implement continuous integration and deployment (CI/CD) workflows that automatically validate, compile, and potentially deploy PMLR proceedings when submitted via pull requests to volume repositories. This would:

1. **Validate proceedings on PR submission** - Run BibTeX validation, check for required files, verify formatting
2. **Provide immediate feedback** - Comment on PRs with validation results and compilation status
3. **Auto-compile Jekyll sites** - Generate the complete Jekyll site structure for review
4. **Optional auto-deployment** - Deploy to staging or production based on approval

## Motivation

### Current Manual Process (As Observed)

The current publication workflow requires significant manual intervention:

1. **Clone volume repository** manually
2. **Add published date** to BibTeX file manually
3. **Run tidy_bibtex.rb** to clean and validate BibTeX
4. **Fix Unicode issues** by adding replacements to `unicode_replacements.yml`
5. **Run create_volume.rb** to generate Jekyll site
6. **Run deploy_volume.sh** to deploy (complex branching logic)
7. **Handle errors** and iterate on fixes
8. **Verify deployment** on GitHub Pages

**Problems with manual process:**
- Time-consuming (especially for bulk publications)
- Error-prone (easy to forget steps)
- Requires deep knowledge of tooling
- No validation before proceedings editors submit
- Unicode issues discovered late in the process
- No standardised testing of submissions

### Benefits of Automation

1. **Early validation** - Catch issues in BibTeX files before submission accepted
2. **Faster turnaround** - Automated compilation and deployment
3. **Lower barrier to entry** - Proceedings editors get immediate feedback
4. **Consistency** - Same validation rules applied to all volumes
5. **Reduced manual effort** - Especially valuable for bulk publications
6. **Better testing** - Automated tests catch regressions

## Detailed Description

### Current Infrastructure

**Existing CI/CD:**
- GitHub Actions workflow: `.github/workflows/test-bibtex-cleaner.yml`
  - Runs on push and PR to papersite repository
  - Tests BibTeX cleaning functionality
  - Validates tidy_bibtex.rb script

**Existing Scripts:**
- `lib/tidy_bibtex.rb` - BibTeX validation and cleaning
- `lib/create_volume.rb` - Jekyll site generation
- `bin/deploy_volume.sh` - Two-branch deployment strategy

**Existing Assets:**
- `pull_request_template.md` - Template for PR submissions
- `unicode_replacements.yml` - Unicode character mappings
- Test suite for BibTeX cleaner

### Proposed CI/CD Architecture

#### Phase 1: Validation Workflow (PR Check)

Create `.github/workflows/validate-proceedings.yml` that runs on PRs to volume repositories:

**Validation Steps:**
1. **Check required files exist:**
   - `*.bib` file present
   - PDF files for each BibTeX entry
   - README.md present

2. **Validate BibTeX structure:**
   - Run `tidy_bibtex.rb --strict --check-author-commas`
   - Check for @proceedings entry with required fields
   - Check for @inproceedings entries matching PDF files
   - Validate OpenReview IDs (if present)

3. **Check for common issues:**
   - Unescaped % characters
   - Missing commas in author fields
   - Unicode characters without mappings
   - Missing required fields (title, author, abstract, pages)

4. **Test compilation:**
   - Run `create_volume.rb` in test mode
   - Verify Jekyll site generates without errors
   - Check for missing PDFs or broken links

5. **Generate validation report:**
   - Post comment on PR with results
   - List any errors or warnings
   - Suggest fixes for common issues
   - Link to relevant documentation

**Example validation comment:**
```markdown
## Proceedings Validation Report

### ✅ Passed Checks
- BibTeX file found: `proceedings.bib`
- 25 papers with matching PDFs
- Jekyll site compiles successfully

### ⚠️ Warnings
- Paper `smith24` abstract contains unescaped % character on line 45
- Unicode character 'é' found in author name (suggestion: use \'e)

### Suggested Fixes
Run the following to fix issues:
\`\`\`bash
ruby lib/tidy_bibtex.rb --fix-all proceedings.bib proceedings_cleaned.bib
\`\`\`

### Next Steps
1. Fix the issues listed above
2. Push the corrected BibTeX file
3. Request review from proceedings editor
```

#### Phase 2: Auto-Compilation Workflow (Post-Merge or Manual Trigger)

Create `.github/workflows/compile-proceedings.yml` that:

1. **Triggers on:**
   - Merge to main branch
   - Manual workflow dispatch (for bulk operations)
   - Scheduled runs (to catch any missed volumes)

2. **Compilation steps:**
   - Add published date (current date or specified)
   - Run tidy_bibtex.rb with auto-fix
   - Run create_volume.rb
   - Generate complete Jekyll site
   - Create artifact with compiled site

3. **Deploy options:**
   - **Option A: Manual deployment** - Create artifact for manual review and deployment
   - **Option B: Staging deployment** - Auto-deploy to staging branch for review
   - **Option C: Production deployment** - Auto-deploy on approval (requires careful permissions)

#### Phase 3: Enhanced Deployment Workflow

Enhance `deploy_volume.sh` or create `.github/workflows/deploy-volume.yml`:

1. **Pre-deployment checks:**
   - Verify all PDFs present
   - Verify Jekyll site valid
   - Check branch status
   - Verify remote repository access

2. **Deployment:**
   - Commit Jekyll files and assets to main
   - Create/update gh-pages branch
   - Clean main branch (assets only)
   - Push both branches
   - Verify GitHub Pages deployment

3. **Post-deployment:**
   - Tag release with volume number
   - Update papersite index (if applicable)
   - Post comment on PR with deployment URL
   - Close associated issues

### Technical Requirements

**Infrastructure:**
1. **GitHub Actions secrets:**
   - `GH_TOKEN` - For repository operations
   - `DEPLOY_KEY` - For deployment operations

2. **Ruby environment:**
   - Ruby 3.0+
   - Required gems: bibtex-ruby, facets, pandoc-ruby, activerecord

3. **Testing environment:**
   - Test volumes for validation
   - Sample BibTeX files with known issues
   - Expected outputs for comparison

**Workflow permissions:**
- Read/write access to repository
- Ability to comment on PRs
- Ability to push to gh-pages branch
- Ability to create tags and releases

### Unicode Handling Strategy

**Problem:** Unicode characters discovered late in process, requiring manual intervention

**Solution:** Proactive unicode detection and suggestion

1. **Pre-validation:**
   - Scan BibTeX for all unicode characters
   - Check against `unicode_replacements.yml`
   - Report missing mappings early

2. **Auto-suggestion:**
   - Suggest LaTeX equivalents for common unicode
   - Provide interactive fix mode in validation
   - Build database of common mappings

3. **Continuous improvement:**
   - Track new unicode characters across submissions
   - Auto-update `unicode_replacements.yml` via PR
   - Learn from past fixes

## Implementation Plan

### Phase 1: Validation Workflow (Weeks 1-2)
1. **Create validation workflow:**
   - [ ] Design workflow structure
   - [ ] Implement required file checks
   - [ ] Implement BibTeX validation
   - [ ] Implement compilation test
   - [ ] Create validation report template

2. **Test validation workflow:**
   - [ ] Test with recent volumes (v292, v307, v310, v311)
   - [ ] Test with intentionally broken BibTeX
   - [ ] Verify error messages are helpful
   - [ ] Test on sample PR

3. **Deploy to papersite:**
   - [ ] Add workflow to papersite repository
   - [ ] Update documentation
   - [ ] Create example submission guide

### Phase 2: Auto-Compilation (Weeks 3-4)
1. **Create compilation workflow:**
   - [ ] Design workflow structure
   - [ ] Implement auto-date addition
   - [ ] Implement auto-fixing
   - [ ] Implement Jekyll generation
   - [ ] Create artifacts

2. **Test compilation workflow:**
   - [ ] Test with multiple volumes
   - [ ] Verify artifacts are correct
   - [ ] Test manual dispatch
   - [ ] Test scheduled runs

3. **Integration:**
   - [ ] Link to validation workflow
   - [ ] Add manual approval gate
   - [ ] Update deployment guide

### Phase 3: Enhanced Deployment (Weeks 5-6)
1. **Create deployment workflow:**
   - [ ] Port deploy_volume.sh logic
   - [ ] Add pre-deployment checks
   - [ ] Implement gh-pages deployment
   - [ ] Add post-deployment verification

2. **Safety features:**
   - [ ] Dry-run mode
   - [ ] Rollback capability
   - [ ] Deployment approval
   - [ ] Status notifications

3. **Documentation:**
   - [ ] Update deployment guide
   - [ ] Create troubleshooting guide
   - [ ] Document approval process

### Phase 4: Unicode Improvements (Ongoing)
1. **Enhance unicode detection:**
   - [ ] Early detection in validation
   - [ ] Auto-suggestion system
   - [ ] Interactive fix mode

2. **Database improvements:**
   - [ ] Track common unicode across volumes
   - [ ] Auto-PR for new mappings
   - [ ] Community contribution guide

## Backward Compatibility

**Maintaining manual process:**
- All scripts remain usable manually
- Workflows are optional enhancements
- No changes to volume repository structure
- Manual deployment still supported

**Migration strategy:**
- Gradual rollout to new volumes
- Existing volumes unchanged
- Opt-in for proceedings editors
- Fallback to manual process always available

## Testing Strategy

### Unit Tests
- Test validation logic independently
- Test BibTeX parsing and checking
- Test file detection and matching
- Test report generation

### Integration Tests
- Test full workflow on sample volumes
- Test with known-good BibTeX files
- Test with known-problematic files
- Test Unicode handling

### End-to-End Tests
- Test complete publication workflow
- Test validation → compilation → deployment
- Test error handling and recovery
- Test on actual volume repositories

### Regression Tests
- Test against volumes v292, v307, v310, v311
- Verify workflows produce same results as manual process
- Verify no breaking changes to existing volumes

## Related Requirements

This CIP implements solutions for:
- Automated validation of proceedings submissions
- Reduced manual effort in publication workflow
- Consistent application of validation rules
- Early detection of formatting issues
- Improved feedback loop for proceedings editors

## Implementation Status
- [ ] Phase 1: Validation Workflow
  - [ ] Design and implement validation checks
  - [ ] Create PR comment template
  - [ ] Test with sample volumes
  - [ ] Deploy to papersite
  
- [ ] Phase 2: Auto-Compilation
  - [ ] Implement compilation workflow
  - [ ] Add manual trigger
  - [ ] Create artifacts
  - [ ] Test deployment
  
- [ ] Phase 3: Enhanced Deployment
  - [ ] Port deployment logic to workflow
  - [ ] Add safety checks
  - [ ] Implement rollback
  - [ ] Document process
  
- [ ] Phase 4: Unicode Improvements
  - [ ] Early detection
  - [ ] Auto-suggestion
  - [ ] Database improvements

## Risks and Mitigation

### Risks

1. **Automated deployment errors:**
   - Mitigation: Dry-run mode, approval gates, rollback capability

2. **False positives in validation:**
   - Mitigation: Comprehensive testing, manual override option

3. **GitHub Actions costs:**
   - Mitigation: Efficient workflows, caching, usage monitoring

4. **Complexity for new contributors:**
   - Mitigation: Clear documentation, examples, manual fallback

5. **Dependency on GitHub Actions:**
   - Mitigation: Keep scripts usable independently, document manual process

### Success Criteria

1. **Validation workflow:**
   - 95%+ of issues caught before manual review
   - Clear, actionable error messages
   - <5 minute runtime

2. **Compilation workflow:**
   - 100% success rate on valid proceedings
   - Generates identical output to manual process
   - <10 minute runtime

3. **Deployment workflow:**
   - Zero failed deployments
   - Complete audit trail
   - Rollback in <5 minutes if needed

## References

- Current deployment script: `bin/deploy_volume.sh`
- BibTeX validation: `lib/tidy_bibtex.rb`
- Volume creation: `lib/create_volume.rb`
- Existing CI: `.github/workflows/test-bibtex-cleaner.yml`
- GitHub Actions documentation: https://docs.github.com/en/actions
- PMLR specification: https://proceedings.mlr.press/spec.html

## Future Enhancements

Beyond initial implementation:

1. **Dashboard for proceedings editors:**
   - View all volumes and their status
   - Trigger deployments from web interface
   - Monitor compilation progress

2. **Automated indexing:**
   - Update proceedings.mlr.press index automatically
   - Generate volume metadata
   - Update search indices

3. **Quality metrics:**
   - Track validation pass rates
   - Monitor common issues
   - Generate quality reports

4. **Integration with OpenReview:**
   - Auto-import proceedings from OpenReview
   - Sync metadata and paper information
   - Validate OpenReview IDs

5. **Multi-repository coordination:**
   - Coordinate deployments across volumes
   - Bulk operations across repositories
   - Dependency management
